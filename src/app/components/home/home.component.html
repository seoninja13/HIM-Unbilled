<div class="container">

    <div *ngIf="homePageData.divisionCollection !== undefined && homePageData.divisionCollection.length > 0">
        <app-filter [homePageData]="homePageData"></app-filter>
    </div>


    <div *ngIf="typeOfSpinner === 'loading'" class="loading-indicator">
        <mat-progress-spinner mode="indeterminate" color="primary"></mat-progress-spinner>
        <div style="margin-top: 10px; margin-left: 19px">Loading...</div>
    </div>


    <div fxLayout="row wrap" fxLayoutGap="16px"
        *ngIf="typeOfSpinner === 'none' && homePageData.facilityGridDataCollection !== undefined && homePageData.facilityGridDataCollection.length > 0">
        <mat-card fxFlex="12.45%" fxFlex.xl="12.9%" class="mat-elevation-z4">
            <mat-card-header>
                <mat-card-subtitle>Total Post Final Bill</mat-card-subtitle>
                <mat-card-title>{{homePageData.facilityGridDataCollection[0].billingBal_ttl}}</mat-card-title>
            </mat-card-header>
        </mat-card>

        <mat-card fxFlex="12.45%" fxFlex.xl="12.9%" class="mat-elevation-z4">
            <mat-card-header>
                <mat-card-subtitle>(Bill49 NFD & FD)</mat-card-subtitle>
                <mat-card-title>{{homePageData.facilityGridDataCollection[0].balanceSum_ttl}}</mat-card-title>
            </mat-card-header>
        </mat-card>

        <mat-card fxFlex="12.45%" fxFlex.xl="12.9%" class="mat-elevation-z4">
            <mat-card-header>
                <mat-card-subtitle>Grand Balance</mat-card-subtitle>
                <mat-card-title>{{homePageData.facilityGridDataCollection[0].grandBal_ttl}}</mat-card-title>
            </mat-card-header>
        </mat-card>

        <mat-card fxFlex="12.45%" fxFlex.xl="12.9%" class="mat-elevation-z4">
            <mat-card-header>
                <mat-card-subtitle>NFD AR Days</mat-card-subtitle>
                <mat-card-title>
                    {{homePageData.facilityGridDataCollection[0].total_Post_Final_Bill_Unbilled_AR_Days_ttl}}
                </mat-card-title>
            </mat-card-header>
        </mat-card>

        <mat-card fxFlex="12.45%" fxFlex.xl="12.9%" class="mat-elevation-z4">
            <mat-card-header>
                <mat-card-subtitle>FD AR Days</mat-card-subtitle>
                <mat-card-title>{{homePageData.facilityGridDataCollection[0].nfD_Unbilled_AR_Days_ttl}}
                </mat-card-title>
            </mat-card-header>
        </mat-card>

        <mat-card fxFlex="12.45%" fxFlex.xl="12.9%" class="mat-elevation-z4">
            <mat-card-header>
                <mat-card-subtitle>Grand AR Days</mat-card-subtitle>
                <mat-card-title>{{homePageData.facilityGridDataCollection[0].grand_Total_Unbilled_AR_Days_ttl}}
                </mat-card-title>
            </mat-card-header>
        </mat-card>

        <mat-card fxFlex="12.45%" fxFlex.xl="12.9%" class="mat-elevation-z4">
            <mat-card-header>
                <mat-card-subtitle>30-Day Avg AR Days</mat-card-subtitle>
                <mat-card-title>{{homePageData.facilityGridDataCollection[0].avgUnbilledARDays_ttl}}
                </mat-card-title>
            </mat-card-header>
        </mat-card>
    </div>


    <table mat-table #table [dataSource]="homePageData.facilityGridDataCollection"
        *ngIf="typeOfSpinner === 'none' && homePageData.facilityGridDataCollection !== undefined && homePageData.facilityGridDataCollection.length > 0"
        style="margin-top: 15px">

        <ng-container matColumnDef="txtUnitName">
            <th mat-header-cell *matHeaderCellDef> Facility </th>
            <td mat-cell *matCellDef="let data"> {{data.txtUnitName}} </td>
            <td mat-footer-cell *matFooterCellDef>
                TOTALS
            </td>
        </ng-container>

        <ng-container matColumnDef="billingBal">
            <th mat-header-cell *matHeaderCellDef> Post Balance </th>
            <td mat-cell *matCellDef="let data"> {{data.billingBal}} </td>
            <td mat-footer-cell *matFooterCellDef>
                {{homePageData.facilityGridDataCollection[0].billingBal_ttl}}
            </td>
        </ng-container>

        <ng-container matColumnDef="balanceSum">
            <th mat-header-cell *matHeaderCellDef> Pre Balance </th>
            <td mat-cell *matCellDef="let data"> {{data.balanceSum}} </td>
            <td mat-footer-cell *matFooterCellDef>
                {{homePageData.facilityGridDataCollection[0].balanceSum_ttl}}
            </td>
        </ng-container>

        <ng-container matColumnDef="grandBal">
            <th mat-header-cell *matHeaderCellDef> Grand Total </th>
            <td mat-cell *matCellDef="let data"> {{data.grandBal}} </td>
            <td mat-footer-cell *matFooterCellDef>
                {{homePageData.facilityGridDataCollection[0].grandBal_ttl}}
            </td>
        </ng-container>

        <ng-container matColumnDef="total_Post_Final_Bill_Unbilled_AR_Days">
            <th mat-header-cell *matHeaderCellDef> P AR Days </th>
            <td mat-cell *matCellDef="let data"> {{data.total_Post_Final_Bill_Unbilled_AR_Days}} </td>
            <td mat-footer-cell *matFooterCellDef>
                {{homePageData.facilityGridDataCollection[0].total_Post_Final_Bill_Unbilled_AR_Days_ttl}}
            </td>
        </ng-container>

        <ng-container matColumnDef="nfD_Unbilled_AR_Days">
            <th mat-header-cell *matHeaderCellDef> N AR Days </th>
            <td mat-cell *matCellDef="let data"> {{data.nfD_Unbilled_AR_Days}} </td>
            <td mat-footer-cell *matFooterCellDef>
                {{homePageData.facilityGridDataCollection[0].nfD_Unbilled_AR_Days_ttl}}
            </td>
        </ng-container>

        <ng-container matColumnDef="fD_Unbilled_AR_Days">
            <th mat-header-cell *matHeaderCellDef> FD AR Days </th>
            <td mat-cell *matCellDef="let data"> {{data.fD_Unbilled_AR_Days}} </td>
            <td mat-footer-cell *matFooterCellDef>
                {{homePageData.facilityGridDataCollection[0].fD_Unbilled_AR_Days_ttl}}
            </td>
        </ng-container>

        <ng-container matColumnDef="grand_Total_Unbilled_AR_Days">
            <th mat-header-cell *matHeaderCellDef> Grand AR </th>
            <td mat-cell *matCellDef="let data"> {{data.grand_Total_Unbilled_AR_Days}} </td>
            <td mat-footer-cell *matFooterCellDef>
                {{homePageData.facilityGridDataCollection[0].grand_Total_Unbilled_AR_Days_ttl}}
            </td>
        </ng-container>

        <ng-container matColumnDef="avgUnbilledARDays">
            <th mat-header-cell *matHeaderCellDef> 30D AR Days </th>
            <td mat-cell *matCellDef="let data" style="border-right: 1px solid #b2b2b2"> {{data.avgUnbilledARDays}}
            </td>
            <td mat-footer-cell *matFooterCellDef>
                {{homePageData.facilityGridDataCollection[0].avgUnbilledARDays_ttl}}
            </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; let even = even; let last = last; columns: displayedColumns;"
            [ngClass]="{ 'gray': even, 'rule': last }"></tr>
        <tr mat-footer-row *matFooterRowDef="displayedColumns"></tr>
    </table>

</div>